---
title: Thử nghiệm Machine Learning Studio (cổ điển)
description: Sử dụng các mô hình Machine Learning Studio (cổ điển) trong Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
ms.reviewer: ameetj
manager: shellyha
ms.openlocfilehash: 556b6810db0ed2733a3f086291757bd85b77e371
ms.sourcegitcommit: a9b2cf598f256d07a48bba8617347ee90024a1dd
ms.translationtype: HT
ms.contentlocale: vi-VN
ms.lasthandoff: 12/03/2020
ms.locfileid: "4669044"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="7430c-103">Sử dụng các mô hình dựa trên Azure Machine Learning Studio (cổ điển)</span><span class="sxs-lookup"><span data-stu-id="7430c-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="7430c-104">Dữ liệu hợp nhất trong Dynamics 365 Customer Insights là nguồn để xây dựng các mô hình máy học có thể tạo thêm thông tin chi tiết về doanh nghiệp.</span><span class="sxs-lookup"><span data-stu-id="7430c-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="7430c-105">Customer Insights tích hợp với Machine Learning Studio (cổ điển) để sử dụng các mô hình tùy chỉnh của riêng bạn.</span><span class="sxs-lookup"><span data-stu-id="7430c-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="7430c-106">Để biết cách tích hợp các mô hình được phát triển trong Azure Machine Learning với Customer Insights, hãy xem [Thử nghiệm Azure Machine Learning](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="7430c-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="7430c-107">Điều kiện tiên quyết</span><span class="sxs-lookup"><span data-stu-id="7430c-107">Prerequisites</span></span>

- <span data-ttu-id="7430c-108">Truy cập Customer Insights</span><span class="sxs-lookup"><span data-stu-id="7430c-108">Access to Customer Insights</span></span>
- <span data-ttu-id="7430c-109">Gói đăng ký Azure Enterprise hiện hoạt</span><span class="sxs-lookup"><span data-stu-id="7430c-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="7430c-110">Hồ sơ khách hàng hợp nhất</span><span class="sxs-lookup"><span data-stu-id="7430c-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="7430c-111">[Xuất thực thể sang bộ nhớ Azure Blob](export-azure-blob-storage.md) thiết lập</span><span class="sxs-lookup"><span data-stu-id="7430c-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="7430c-112">Thiết lập Machine Learning Studio Cổ điển</span><span class="sxs-lookup"><span data-stu-id="7430c-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="7430c-113">Trong bước đầu tiên, chúng ta cần tạo không gian làm việc và mở Machine Learning Studio (cổ điển).</span><span class="sxs-lookup"><span data-stu-id="7430c-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="7430c-114">Truy cập[https://www.portal.azure.com](https://www.portal.azure.com/) và đăng nhập.</span><span class="sxs-lookup"><span data-stu-id="7430c-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="7430c-115">Chọn **Tạo nguồn lực**.</span><span class="sxs-lookup"><span data-stu-id="7430c-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="7430c-116">Tìm kiếm **Không gian làm việc Studio máy học** rồi chọn **Tạo**.</span><span class="sxs-lookup"><span data-stu-id="7430c-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="7430c-117">Nhập các chi tiết cần thiết để [tạo không gian làm việc](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="7430c-117">Enter the required details to [create the workspace](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="7430c-118">Chọn **Bậc định giá gói dịch vụ web** dựa trên lượng dữ liệu bạn muốn nhập.</span><span class="sxs-lookup"><span data-stu-id="7430c-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="7430c-119">Để có hiệu suất tốt nhất, hãy chọn **Vị trí** gần nhất về mặt địa lý với bạn.</span><span class="sxs-lookup"><span data-stu-id="7430c-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="7430c-120">Sau khi tạo nguồn lực, bảng thông tin không gian làm việc Studio máy học sẽ xuất hiện.</span><span class="sxs-lookup"><span data-stu-id="7430c-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="7430c-121">Chọn **Khởi chạy Studio máy học**.</span><span class="sxs-lookup"><span data-stu-id="7430c-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Giao diện người dùng Studio máy học của Azure](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="7430c-123">Làm việc với Studio máy học của Azure</span><span class="sxs-lookup"><span data-stu-id="7430c-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="7430c-124">Giờ đây, bạn có thể tạo một thử nghiệm mới hoặc nhập một mẫu thử nghiệm hiện có từ thư viện mẫu.</span><span class="sxs-lookup"><span data-stu-id="7430c-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="7430c-125">Có các thử nghiệm mẫu cho ba trường hợp tiêu chuẩn:</span><span class="sxs-lookup"><span data-stu-id="7430c-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="7430c-126">Dự đoán khả năng rời đi</span><span class="sxs-lookup"><span data-stu-id="7430c-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="7430c-127">Giá trị trọn đời của khách hàng</span><span class="sxs-lookup"><span data-stu-id="7430c-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="7430c-128">Đề xuất sản phẩm hoặc hành động tốt nhất tiếp theo</span><span class="sxs-lookup"><span data-stu-id="7430c-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="7430c-129">Nếu bạn tạo thử nghiệm mới hoặc sử dụng mẫu thử nghiệm từ thư viện, bạn cần đặt cấu hình thuộc tính **Nhập dữ liệu**.</span><span class="sxs-lookup"><span data-stu-id="7430c-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="7430c-130">Sử dụng trải nghiệm được hướng dẫn hoặc trực tiếp cung cấp thông tin chi tiết để truy cập Azure Blob Storage chứa dữ liệu của bạn.</span><span class="sxs-lookup"><span data-stu-id="7430c-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Thử nghiệm Studio máy học của Azure](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="7430c-132">Giờ đây, bạn có thể xây dựng một quy trình bán hàng xử lý tùy chỉnh để làm sạch và xử lý trước dữ liệu, trích xuất các đặc điểm và đào tạo một mô hình phù hợp.</span><span class="sxs-lookup"><span data-stu-id="7430c-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="7430c-133">Kiểm tra và tối ưu hóa hiệu suất của mô hình.</span><span class="sxs-lookup"><span data-stu-id="7430c-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="7430c-134">Khi bạn hài lòng với chất lượng của một mô hình, hãy chọn **Thiết lập dịch vụ web** > **Dịch vụ web dự đoán**.</span><span class="sxs-lookup"><span data-stu-id="7430c-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="7430c-135">Tùy chọn này nhập mô hình được đào tạo và quy trình bán hàng phát triển các đặc điểm bổ sung từ thử nghiệm đào tạo đến dịch vụ dự đoán.</span><span class="sxs-lookup"><span data-stu-id="7430c-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="7430c-136">Dịch vụ dự đoán có thể lấy một tập hợp dữ liệu đầu vào khác với lược đồ được sử dụng trong thử nghiệm đào tạo để đưa ra dự đoán.</span><span class="sxs-lookup"><span data-stu-id="7430c-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Thiết lập dịch vụ web dự đoán](media/predictive-webservice-control.png)

1. <span data-ttu-id="7430c-138">Sau khi thử nghiệm dịch vụ web dự đoán thành công, bạn có thể triển khai nó để lập lịch tự động.</span><span class="sxs-lookup"><span data-stu-id="7430c-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="7430c-139">Để dịch vụ web hoạt động với Customer Insights, hãy chọn **Triển khai dịch vụ web** > **Xem trước Triển khai dịch vụ web [Mới]**.</span><span class="sxs-lookup"><span data-stu-id="7430c-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="7430c-140">[Tìm hiểu thêm về việc triển khai dịch vụ web](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service)</span><span class="sxs-lookup"><span data-stu-id="7430c-140">[Learn more about deploying a web service](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Triển khai dịch vụ web dự đoán](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="7430c-142">Các chế độ mẫu từ thư viện</span><span class="sxs-lookup"><span data-stu-id="7430c-142">Sample models from the gallery</span></span>

<span data-ttu-id="7430c-143">Chúng tôi sẽ sử dụng một kịch bản giả tưởng về Khách sạn Đàm cho các mô hình trong bài viết này.</span><span class="sxs-lookup"><span data-stu-id="7430c-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="7430c-144">Khách sạn Đàm thu thập các dữ liệu sau:</span><span class="sxs-lookup"><span data-stu-id="7430c-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="7430c-145">Dữ liệu CRM bao gồm hoạt động lưu trú tại khách sạn.</span><span class="sxs-lookup"><span data-stu-id="7430c-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="7430c-146">Tập hợp dữ liệu bao gồm thông tin về ngày lưu trú của từng khách hàng đã đăng ký.</span><span class="sxs-lookup"><span data-stu-id="7430c-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="7430c-147">Nó cũng chứa thông tin về đặt phòng, loại phòng, chi tiết chi tiêu, v.v.</span><span class="sxs-lookup"><span data-stu-id="7430c-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="7430c-148">Dữ liệu kéo dài bốn năm, từ tháng 1 năm 2014 đến tháng 1 năm 2018.</span><span class="sxs-lookup"><span data-stu-id="7430c-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="7430c-149">Hồ sơ khách hàng của khách trong khách sạn.</span><span class="sxs-lookup"><span data-stu-id="7430c-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="7430c-150">Những hồ sơ này chứa thông tin về từng khách hàng, bao gồm tên, ngày sinh, địa chỉ bưu điện, giới tính và số điện thoại của họ.</span><span class="sxs-lookup"><span data-stu-id="7430c-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="7430c-151">Sử dụng các dịch vụ do khách sạn cung cấp, chẳng hạn như spa, giặt là, Wi-Fi hoặc chuyển phát nhanh.</span><span class="sxs-lookup"><span data-stu-id="7430c-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="7430c-152">Thông tin này được ghi lại cho mỗi khách hàng đã đăng ký.</span><span class="sxs-lookup"><span data-stu-id="7430c-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="7430c-153">Thông thường, việc sử dụng các dịch vụ được liên kết với việc lưu trú.</span><span class="sxs-lookup"><span data-stu-id="7430c-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="7430c-154">Trong một số trường hợp, khách hàng có thể sử dụng dịch vụ mà không cần lưu trú trong khách sạn.</span><span class="sxs-lookup"><span data-stu-id="7430c-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="7430c-155">Phân tích khả năng rời đi</span><span class="sxs-lookup"><span data-stu-id="7430c-155">Churn Analysis</span></span>

<span data-ttu-id="7430c-156">Phân tích khả năng rời đi áp dụng cho các lĩnh vực kinh doanh khác nhau.</span><span class="sxs-lookup"><span data-stu-id="7430c-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="7430c-157">Trong ví dụ này, chúng ta sẽ xem xét khả năng ngừng sử dụng dịch vụ, cụ thể là trong bối cảnh của các dịch vụ khách sạn như được mô tả ở trên.</span><span class="sxs-lookup"><span data-stu-id="7430c-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="7430c-158">Nó cung cấp một ví dụ hoạt động của một quy trình bán hàng mô hình toàn diện có thể được sử dụng làm điểm khởi đầu cho bất kỳ loại mô hình rời đi nào khác.</span><span class="sxs-lookup"><span data-stu-id="7430c-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="7430c-159">Định nghĩa của việc rời đi</span><span class="sxs-lookup"><span data-stu-id="7430c-159">Definition of Churn</span></span>

<span data-ttu-id="7430c-160">Định nghĩa của việc rời đi có thể khác nhau tùy theo tình huống.</span><span class="sxs-lookup"><span data-stu-id="7430c-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="7430c-161">Trong ví dụ này, một khách đã không ghé thăm khách sạn trong năm qua sẽ được gắn nhãn là đã rời đi.</span><span class="sxs-lookup"><span data-stu-id="7430c-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="7430c-162">Mẫu thử nghiệm có thể được nhập từ thư viện.</span><span class="sxs-lookup"><span data-stu-id="7430c-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="7430c-163">Trước tiên, hãy đảm bảo rằng bạn nhập dữ liệu cho **Hoạt động lưu trú tại khách sạn**, **Dữ liệu khách hàng** và **Dữ liệu sử dụng dịch vụ** từ bộ nhớ Azure Blob.</span><span class="sxs-lookup"><span data-stu-id="7430c-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Nhập dữ liệu cho mô hình rời đi](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="7430c-165">Phát triển các đặc điểm bổ sung</span><span class="sxs-lookup"><span data-stu-id="7430c-165">Featurization</span></span>

<span data-ttu-id="7430c-166">Dựa trên định nghĩa của việc rời đi, trước tiên chúng tôi xác định các đặc điểm thô sẽ ảnh hưởng đến nhãn.</span><span class="sxs-lookup"><span data-stu-id="7430c-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="7430c-167">Sau đó, chúng tôi xử lý các đặc điểm thô này thành đặc điểm dạng số có thể dùng với mô hình học trên máy.</span><span class="sxs-lookup"><span data-stu-id="7430c-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="7430c-168">Tích hợp dữ liệu diễn ra trong Customer Insights để chúng tôi có thể kết hợp các bảng này bằng cách sử dụng *ID khách hàng*.</span><span class="sxs-lookup"><span data-stu-id="7430c-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Kết hợp dữ liệu đã nhập](media/join-imported-data.png)

<span data-ttu-id="7430c-170">Việc phát triển các đặc điểm bổ sung để xây dựng mô hình nhằm phân tích khả năng rời đi có thể hơi phức tạp.</span><span class="sxs-lookup"><span data-stu-id="7430c-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="7430c-171">Dữ liệu là một hàm thời gian với hoạt động mới của khách sạn được ghi lại hàng ngày.</span><span class="sxs-lookup"><span data-stu-id="7430c-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="7430c-172">Trong quá trình phát triển các đặc điểm bổ sung, chúng tôi muốn tạo các đặc điểm tĩnh từ dữ liệu động.</span><span class="sxs-lookup"><span data-stu-id="7430c-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="7430c-173">Trong trường hợp này, chúng tôi tạo ra nhiều đặc điểm từ hoạt động của khách sạn với cửa sổ trượt trong một năm.</span><span class="sxs-lookup"><span data-stu-id="7430c-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="7430c-174">Chúng tôi cũng mở rộng các đặc điểm phân loại như loại phòng hoặc loại đặt phòng thành các đặc điểm riêng biệt bằng cách sử dụng mã hóa one-hot.</span><span class="sxs-lookup"><span data-stu-id="7430c-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="7430c-175">Danh sách cuối cùng của các đặc điểm:</span><span class="sxs-lookup"><span data-stu-id="7430c-175">Final list of features:</span></span>

| <span data-ttu-id="7430c-176">**Số**</span><span class="sxs-lookup"><span data-stu-id="7430c-176">**Number**</span></span>  | <span data-ttu-id="7430c-177">**Original_Column**</span><span class="sxs-lookup"><span data-stu-id="7430c-177">**Original_Column**</span></span>          | <span data-ttu-id="7430c-178">**Các đặc điểm bắt nguồn**</span><span class="sxs-lookup"><span data-stu-id="7430c-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="7430c-179">1</span><span class="sxs-lookup"><span data-stu-id="7430c-179">1</span></span>           | <span data-ttu-id="7430c-180">Loại phòng</span><span class="sxs-lookup"><span data-stu-id="7430c-180">Room Type</span></span>                    | <span data-ttu-id="7430c-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="7430c-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="7430c-182">2</span><span class="sxs-lookup"><span data-stu-id="7430c-182">2</span></span>           | <span data-ttu-id="7430c-183">Loại Đăng ký</span><span class="sxs-lookup"><span data-stu-id="7430c-183">Booking Type</span></span>                 | <span data-ttu-id="7430c-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="7430c-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="7430c-185">3</span><span class="sxs-lookup"><span data-stu-id="7430c-185">3</span></span>           | <span data-ttu-id="7430c-186">Danh mục di chuyển</span><span class="sxs-lookup"><span data-stu-id="7430c-186">Travel Category</span></span>              | <span data-ttu-id="7430c-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="7430c-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="7430c-188">4</span><span class="sxs-lookup"><span data-stu-id="7430c-188">4</span></span>           | <span data-ttu-id="7430c-189">Đô la đã chi</span><span class="sxs-lookup"><span data-stu-id="7430c-189">Dollars Spent</span></span>                | <span data-ttu-id="7430c-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="7430c-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="7430c-191">5</span><span class="sxs-lookup"><span data-stu-id="7430c-191">5</span></span>           | <span data-ttu-id="7430c-192">Ngày nhận phòng và ngày thanh toán</span><span class="sxs-lookup"><span data-stu-id="7430c-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="7430c-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="7430c-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="7430c-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="7430c-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="7430c-195">6</span><span class="sxs-lookup"><span data-stu-id="7430c-195">6</span></span>           | <span data-ttu-id="7430c-196">Việc sử dụng dịch vụ</span><span class="sxs-lookup"><span data-stu-id="7430c-196">Service Usage</span></span>                | <span data-ttu-id="7430c-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="7430c-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="7430c-198">Lựa chọn chế độ</span><span class="sxs-lookup"><span data-stu-id="7430c-198">Model selection</span></span>

<span data-ttu-id="7430c-199">Bây giờ chúng ta cần chọn thuật toán tối ưu để sử dụng.</span><span class="sxs-lookup"><span data-stu-id="7430c-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="7430c-200">Trong trường hợp này, hầu hết các đặc điểm đều dựa trên các đặc điểm phân loại.</span><span class="sxs-lookup"><span data-stu-id="7430c-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="7430c-201">Thông thường, các mô hình dựa trên cây quyết định hoạt động tốt.</span><span class="sxs-lookup"><span data-stu-id="7430c-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="7430c-202">Nếu chỉ có các đặc điểm số, mạng nơ-ron có thể là lựa chọn tốt hơn.</span><span class="sxs-lookup"><span data-stu-id="7430c-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="7430c-203">Máy vectơ hỗ trợ (SVM) cũng hữu ích trong những tình huống như vậy; tuy nhiên, nó cần khá nhiều điều chỉnh để trích xuất hiệu suất tốt nhất.</span><span class="sxs-lookup"><span data-stu-id="7430c-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="7430c-204">Chúng tôi chọn **Cây quyết định tăng cường hai lớp** là mô hình được lựa chọn đầu tiên, tiếp theo là **SVM hai lớp** làm mô hình thứ hai.</span><span class="sxs-lookup"><span data-stu-id="7430c-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="7430c-205">Studio máy học của Azure cho phép bạn thực hiện thử nghiệm A/B, vì vậy sẽ có lợi khi bắt đầu với hai mô hình thay vì một.</span><span class="sxs-lookup"><span data-stu-id="7430c-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="7430c-206">Hình ảnh sau đây cho thấy quy trình đào tạo và đánh giá mô hình từ Studio máy học của Azure:</span><span class="sxs-lookup"><span data-stu-id="7430c-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Mô hình rời đi trong Studio máy học của Azure](media/azure-machine-learning-model.png)

<span data-ttu-id="7430c-208">Chúng tôi cũng áp dụng một kỹ thuật gọi là **Tầm quan trọng của đặc điểm hoán vị**, một khía cạnh quan trọng của tối ưu hóa mô hình.</span><span class="sxs-lookup"><span data-stu-id="7430c-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="7430c-209">Các mô hình tích hợp có rất ít hoặc không có thông tin chuyên sâu về tác động của bất kỳ đặc điểm cụ thể nào đối với dự đoán cuối cùng.</span><span class="sxs-lookup"><span data-stu-id="7430c-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="7430c-210">Máy tính mức độ quan trọng của đặc điểm sử dụng một thuật toán tùy chỉnh để tính toán ảnh hưởng của các đặc điểm riêng lẻ đến kết quả của một mô hình cụ thể.</span><span class="sxs-lookup"><span data-stu-id="7430c-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="7430c-211">Mức độ quan trọng của đặc điểm được chuẩn hóa từ +1 đến -1.</span><span class="sxs-lookup"><span data-stu-id="7430c-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="7430c-212">Ảnh hưởng tiêu cực có nghĩa là đặc điểm tương ứng có ảnh hưởng ngược lại trực quan đến kết quả và cần được loại bỏ khỏi mô hình.</span><span class="sxs-lookup"><span data-stu-id="7430c-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="7430c-213">Ảnh hưởng tích cực cho thấy đặc điểm này đang đóng góp rất nhiều vào dự đoán.</span><span class="sxs-lookup"><span data-stu-id="7430c-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="7430c-214">Các giá trị này không phải là hệ số tương quan vì chúng là các chỉ số khác nhau.</span><span class="sxs-lookup"><span data-stu-id="7430c-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="7430c-215">Để biết thêm thông tin, hãy xem [Tầm quan trọng của đặc điểm hoán vị](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="7430c-215">For more information, see [Permutation Feature Importance](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="7430c-216">Toàn bộ [thử nghiệm rời đi có sẵn trong Thư viện trí tuệ nhân tạo Azure](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="7430c-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="7430c-217">Dự đoán giá trị trọn đời của khách hàng</span><span class="sxs-lookup"><span data-stu-id="7430c-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="7430c-218">Việc tính toán giá trị trọn đời của khách hàng (CLTV) là một trong những số liệu chính mà doanh nghiệp có thể sử dụng để đánh giá và phân khúc khách hàng của mình.</span><span class="sxs-lookup"><span data-stu-id="7430c-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="7430c-219">Đối với kinh doanh khách sạn, điều quan trọng là phải biết khách hàng của họ.</span><span class="sxs-lookup"><span data-stu-id="7430c-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="7430c-220">Ví dụ: hiểu các yếu tố tạo nên khách hàng tốt là thông tin quan trọng.</span><span class="sxs-lookup"><span data-stu-id="7430c-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="7430c-221">Nó giúp ban quản lý khách sạn đánh giá họ cần tập trung vào những đặc điểm nào và cải tiến để làm hài lòng những khách hàng trả tiền cao của họ.</span><span class="sxs-lookup"><span data-stu-id="7430c-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="7430c-222">Những quyết định này có thể có tác động trực tiếp đến doanh số bán hàng và thu nhập.</span><span class="sxs-lookup"><span data-stu-id="7430c-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="7430c-223">Định nghĩa về CLTV</span><span class="sxs-lookup"><span data-stu-id="7430c-223">Definition of CLTV</span></span>

<span data-ttu-id="7430c-224">Đối với ví dụ này, chúng tôi xác định CLTV của một khách hàng là tổng số tiền mà khách hàng dự kiến sẽ chi trong 365 ngày tới.</span><span class="sxs-lookup"><span data-stu-id="7430c-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="7430c-225">Chúng tôi sẽ sử dụng dữ liệu có giá trị trong ba năm qua cho tất cả khách hàng để dự đoán giá trị này.</span><span class="sxs-lookup"><span data-stu-id="7430c-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="7430c-226">Phát triển các đặc điểm bổ sung</span><span class="sxs-lookup"><span data-stu-id="7430c-226">Featurization</span></span>

<span data-ttu-id="7430c-227">Trong trường hợp này, việc phát triển các đặc điểm bổ sung sẽ giống như tình huống rời đi.</span><span class="sxs-lookup"><span data-stu-id="7430c-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="7430c-228">Tuy nhiên, các nhãn và giá trị dự đoán khác với định nghĩa ở trên.</span><span class="sxs-lookup"><span data-stu-id="7430c-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="7430c-229">Lựa chọn chế độ</span><span class="sxs-lookup"><span data-stu-id="7430c-229">Model selection</span></span>

<span data-ttu-id="7430c-230">Dự đoán CLTV là một bài toán hồi quy vì giá trị dự đoán là một biến liên tục có giá trị dương.</span><span class="sxs-lookup"><span data-stu-id="7430c-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="7430c-231">Dựa trên các thuộc tính đối tượng, chúng tôi chọn **Hồi quy cây quyết định tăng cường** như một thuật toán và **Hồi quy mạng nơ-ron** như một thuật toán khác để đào tạo mô hình.</span><span class="sxs-lookup"><span data-stu-id="7430c-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="7430c-232">Đề xuất sản phẩm hoặc Hành động tốt nhất tiếp theo</span><span class="sxs-lookup"><span data-stu-id="7430c-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="7430c-233">Đề xuất sản phẩm trong kịch bản khách sạn được hiểu là giới thiệu các dịch vụ do khách sạn cung cấp cho khách hàng.</span><span class="sxs-lookup"><span data-stu-id="7430c-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="7430c-234">Mục tiêu là lựa chọn các dịch vụ phù hợp cho khách hàng sao cho hiệu quả sử dụng của họ là tối đa.</span><span class="sxs-lookup"><span data-stu-id="7430c-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="7430c-235">Nó tương tự như các đề xuất phim cho người dùng dịch vụ phát trực tuyến video.</span><span class="sxs-lookup"><span data-stu-id="7430c-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="7430c-236">Định nghĩa đề xuất sản phẩm hoặc hành động tốt nhất tiếp theo</span><span class="sxs-lookup"><span data-stu-id="7430c-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="7430c-237">Chúng tôi xác định mục tiêu là tối đa hóa số tiền sử dụng dịch vụ bằng cách cung cấp các dịch vụ phù hợp nhất cho khách hàng theo sở thích của họ.</span><span class="sxs-lookup"><span data-stu-id="7430c-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="7430c-238">Phát triển các đặc điểm bổ sung</span><span class="sxs-lookup"><span data-stu-id="7430c-238">Featurization</span></span>

<span data-ttu-id="7430c-239">Giống như mô hình rời đi, chúng tôi đang kết hợp ServiceCustomerID của khách sạn với CustomerID để tạo các đề xuất nhất quán cho mỗi CustomerID.</span><span class="sxs-lookup"><span data-stu-id="7430c-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Phát triển đặc điểm bổ sung của mô hình đề xuất](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="7430c-241">Dữ liệu được lấy từ ba thực thể khác nhau và các đặc điểm được lấy từ chúng.</span><span class="sxs-lookup"><span data-stu-id="7430c-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="7430c-242">Việc phát triển đặc điểm bổ sung cho vấn đề khuyến nghị khác với tình huống rời đi hoặc CLTV.</span><span class="sxs-lookup"><span data-stu-id="7430c-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="7430c-243">Mô hình khuyến nghị cần dữ liệu đầu vào dưới dạng ba bộ đặc điểm.</span><span class="sxs-lookup"><span data-stu-id="7430c-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="7430c-244">Lựa chọn chế độ</span><span class="sxs-lookup"><span data-stu-id="7430c-244">Model selection</span></span>

<span data-ttu-id="7430c-245">Chúng tôi dự đoán các sản phẩm hoặc dịch vụ bằng cách sử dụng thuật toán được gọi là **Trình đề xuất hộp đối sánh đào tạo** để đào tạo mô hình khuyến nghị.</span><span class="sxs-lookup"><span data-stu-id="7430c-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Thuật toán đề xuất sản phẩm](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="7430c-247">Ba cổng đầu vào cho mô hình **Trình đề xuất hộp đối sánh đào tạo** lấy dữ liệu sử dụng dịch vụ đào tạo, mô tả khách hàng (tùy chọn) và mô tả dịch vụ.</span><span class="sxs-lookup"><span data-stu-id="7430c-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="7430c-248">Có ba cách khác nhau để cho tính điểm mô hình.</span><span class="sxs-lookup"><span data-stu-id="7430c-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="7430c-249">Một là để đánh giá mô hình trong đó điểm Độ lợi tích lũy giảm dần (NDCG) được tính để xếp hạng các mặt hàng được xếp hạng.</span><span class="sxs-lookup"><span data-stu-id="7430c-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="7430c-250">Trong thử nghiệm này, chúng tôi có điểm NDCG là 0,97.</span><span class="sxs-lookup"><span data-stu-id="7430c-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="7430c-251">Hai tùy chọn khác là chấm điểm mô hình trên toàn bộ danh mục dịch vụ được đề xuất, hoặc chỉ cho điểm trên các mặt hàng mà người dùng chưa sử dụng trước đó.</span><span class="sxs-lookup"><span data-stu-id="7430c-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="7430c-252">Xem xét thêm về việc phân phối các đề xuất trên toàn bộ danh mục dịch vụ, chúng tôi nhận thấy rằng điện thoại, Wi-Fi và chuyển phát nhanh là những dịch vụ hàng đầu được đề xuất.</span><span class="sxs-lookup"><span data-stu-id="7430c-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="7430c-253">Điều này phù hợp với những gì chúng tôi tìm thấy từ việc phân phối dữ liệu tiêu thụ dịch vụ:</span><span class="sxs-lookup"><span data-stu-id="7430c-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Đầu ra mô hình đề xuất](media/azure-machine-learning-model-output.png)

<span data-ttu-id="7430c-255">Toàn bộ [thử nghiệm đề xuất sản phẩm có thể được truy cập trong Thư viện trí tuệ nhân tạo Azure.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="7430c-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="7430c-256">Tích hợp mô hình tùy chỉnh</span><span class="sxs-lookup"><span data-stu-id="7430c-256">Integrate custom models</span></span>

<span data-ttu-id="7430c-257">Để sử dụng những dự đoán này trong Customer Insights, bạn cần **xuất** dự đoán cùng với ID khách hàng.</span><span class="sxs-lookup"><span data-stu-id="7430c-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="7430c-258">[Xuất chúng sang cùng một vị trí lưu trữ Azure Blob](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) mà bạn xuất dữ liệu nguồn sang.</span><span class="sxs-lookup"><span data-stu-id="7430c-258">[Export them to the same Azure Blob storage location](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="7430c-259">Dịch vụ web dự đoán có thể được lên lịch chạy thường xuyên và cập nhật điểm số.</span><span class="sxs-lookup"><span data-stu-id="7430c-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="7430c-260">Dữ liệu do mô hình tùy chỉnh tạo ra có thể được sử dụng để tăng cường thêm dữ liệu khách hàng của bạn.</span><span class="sxs-lookup"><span data-stu-id="7430c-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="7430c-261">Để biết thêm thông tin, hãy xem [Mô hình máy học tùy chỉnh](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="7430c-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>
